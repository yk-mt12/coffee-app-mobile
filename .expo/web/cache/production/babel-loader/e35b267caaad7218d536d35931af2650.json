{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{Platform}from'expo-modules-core';import invariant from'invariant';var EventTypes=['url'];var listeners=[];export default{addEventListener:function addEventListener(type,listener){invariant(EventTypes.indexOf(type)!==-1,\"Linking.addEventListener(): \"+type+\" is not a valid event\");var nativeListener=function nativeListener(nativeEvent){return listener({url:window.location.href,nativeEvent:nativeEvent});};listeners.push({listener:listener,nativeListener:nativeListener});window.addEventListener('message',nativeListener,false);},removeEventListener:function removeEventListener(type,listener){invariant(EventTypes.indexOf(type)!==-1,\"Linking.removeEventListener(): \"+type+\" is not a valid event.\");var listenerIndex=listeners.findIndex(function(pair){return pair.listener===listener;});invariant(listenerIndex!==-1,'Linking.removeEventListener(): cannot remove an unregistered event listener.');var nativeListener=listeners[listenerIndex].nativeListener;window.removeEventListener('message',nativeListener,false);listeners.splice(listenerIndex,1);},canOpenURL:function canOpenURL(url){return function _callee(){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",true);case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);}();},getInitialURL:function getInitialURL(){return function _callee2(){return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(Platform.isDOMAvailable){_context2.next=2;break;}return _context2.abrupt(\"return\",'');case 2:return _context2.abrupt(\"return\",window.location.href);case 3:case\"end\":return _context2.stop();}}},null,null,null,Promise);}();},openURL:function openURL(url){return function _callee3(){return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(Platform.isDOMAvailable){window.location=new URL(url,window.location).toString();}case 1:case\"end\":return _context3.stop();}}},null,null,null,Promise);}();}};","map":{"version":3,"sources":["../src/ExpoLinking.web.ts"],"names":[],"mappings":"4DAAA,OAAS,QAAT,KAAyB,mBAAzB,CACA,MAAO,CAAA,SAAP,KAAsB,WAAtB,CAIA,GAAM,CAAA,UAAU,CAAG,CAAC,KAAD,CAAnB,CAEA,GAAM,CAAA,SAAS,CAAmE,EAAlF,CAEA,cAAe,CACb,gBADa,2BACI,IADJ,CACiB,QADjB,CACsC,CACjD,SAAS,CACP,UAAU,CAAC,OAAX,CAAmB,IAAnB,IAA6B,CAAC,CADvB,gCAEwB,IAFxB,yBAAT,CAIA,GAAM,CAAA,cAAc,CAAsB,QAApC,CAAA,cAAoC,CAAC,WAAD,QACxC,CAAA,QAAQ,CAAC,CAAE,GAAG,CAAE,MAAM,CAAC,QAAP,CAAgB,IAAvB,CAA6B,WAAW,CAAX,WAA7B,CAAD,CADgC,EAA1C,CAEA,SAAS,CAAC,IAAV,CAAe,CAAE,QAAQ,CAAR,QAAF,CAAY,cAAc,CAAd,cAAZ,CAAf,EACA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,CAAmC,cAAnC,CAAmD,KAAnD,EACD,CAVY,CAYb,mBAZa,8BAYO,IAZP,CAYoB,QAZpB,CAYyC,CACpD,SAAS,CACP,UAAU,CAAC,OAAX,CAAmB,IAAnB,IAA6B,CAAC,CADvB,mCAE2B,IAF3B,0BAAT,CAIA,GAAM,CAAA,aAAa,CAAG,SAAS,CAAC,SAAV,CAAoB,SAAC,IAAD,QAAU,CAAA,IAAI,CAAC,QAAL,GAAkB,QAA5B,EAApB,CAAtB,CACA,SAAS,CACP,aAAa,GAAK,CAAC,CADZ,CAEP,8EAFO,CAAT,CAIA,GAAM,CAAA,cAAc,CAAG,SAAS,CAAC,aAAD,CAAT,CAAyB,cAAhD,CACA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,CAAsC,cAAtC,CAAsD,KAAtD,EACA,SAAS,CAAC,MAAV,CAAiB,aAAjB,CAAgC,CAAhC,EACD,CAzBY,CA2BP,UA3BO,qBA2BI,GA3BJ,CA2Be,4KAEnB,IAFmB,0EAG3B,CA9BY,CAgCP,aAhCO,yBAgCM,oJACZ,QAAQ,CAAC,cADG,2DACoB,EADpB,0CAEV,MAAM,CAAC,QAAP,CAAgB,IAFN,2EAGlB,CAnCY,CAqCP,OArCO,kBAqCC,GArCD,CAqCY,iJACvB,GAAI,QAAQ,CAAC,cAAb,CAA6B,CAE3B,MAAM,CAAC,QAAP,CAAkB,GAAI,CAAA,GAAJ,CAAQ,GAAR,CAAa,MAAM,CAAC,QAApB,EAA8B,QAA9B,EAAlB,CACD,CAJsB,yEAKxB,CA1CY,CAAf","sourcesContent":["import { Platform } from 'expo-modules-core';\nimport invariant from 'invariant';\n\nimport { NativeURLListener, URLListener } from './Linking.types';\n\nconst EventTypes = ['url'];\n\nconst listeners: { listener: URLListener; nativeListener: NativeURLListener }[] = [];\n\nexport default {\n  addEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.addEventListener(): ${type} is not a valid event`\n    );\n    const nativeListener: NativeURLListener = (nativeEvent) =>\n      listener({ url: window.location.href, nativeEvent });\n    listeners.push({ listener, nativeListener });\n    window.addEventListener('message', nativeListener, false);\n  },\n\n  removeEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.removeEventListener(): ${type} is not a valid event.`\n    );\n    const listenerIndex = listeners.findIndex((pair) => pair.listener === listener);\n    invariant(\n      listenerIndex !== -1,\n      'Linking.removeEventListener(): cannot remove an unregistered event listener.'\n    );\n    const nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  },\n\n  async canOpenURL(url: string): Promise<boolean> {\n    // In reality this should be able to return false for links like `chrome://` on chrome.\n    return true;\n  },\n\n  async getInitialURL(): Promise<string> {\n    if (!Platform.isDOMAvailable) return '';\n    return window.location.href;\n  },\n\n  async openURL(url: string): Promise<void> {\n    if (Platform.isDOMAvailable) {\n      // @ts-ignore\n      window.location = new URL(url, window.location).toString();\n    }\n  },\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}